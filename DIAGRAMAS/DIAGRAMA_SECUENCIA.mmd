sequenceDiagram
    participant Sistema
    participant Boton
    participant Sensor
    participant Comunicacion

    Sistema->>Boton: Leer estado
    Boton-->>Sistema: Respuesta

    Sistema->>Sensor: Leer ubicación
    Sensor-->>Sistema: Datos

    Sistema->>Sensor: Leer frecuencia cardíaca
    Sensor-->>Sistema: Valor

    alt Botón tocado
        Sistema->>Sistema: Activar alerta de pánico
    else Frecuencia baja
        Sistema->>Sistema: Activar alerta de bradicardia
    else Frecuencia alta
        Sistema->>Sistema: Activar alerta de taquicardia
    else
        Sistema->>Sistema: Sin alerta
    end

    Sistema->>Comunicacion: Consultar señal
    Comunicacion-->>Sistema: Resultado señal

    alt Señal válida
        Sistema->>Comunicacion: Consultar registro en red
        Comunicacion-->>Sistema: Resultado registro

        alt Registrado Y alerta activa
            Sistema->>Comunicacion: Enviar mensaje
            Comunicacion-->>Sistema: Confirmación
        else
            Sistema->>Sistema: No enviar (falta registro o no hay alerta)
        end

    else
        Sistema->>Sistema: Sin señal, no enviar
    end

    Sistema->>Sistema: Fin del ciclo
